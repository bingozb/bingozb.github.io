(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{352:function(s,t,a){"use strict";a.r(t);var r=a(4),e=Object(r.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[s._v("从 App Store 上下载的 ipa 里面的二进制文件是经过加密的，class-dump 和 Hopper Disassembler 都需要用到未加密的二进制文件，需要通过砸壳得到。网上敲壳教程还是挺多的，几乎都差不多，但都太旧了都没有更新，例如在 iOS10.2 下，传统的 dumpdecrypted 砸壳就会有问题，需要加点其它操作才能敲成功。")]),s._v(" "),a("h2",{attrs:{id:"查看二进制文件是否加密"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看二进制文件是否加密"}},[s._v("#")]),s._v(" 查看二进制文件是否加密")]),s._v(" "),a("p",[s._v("可以使用 "),a("code",[s._v("otool")]),s._v(" 来查看，"),a("code",[s._v("otool -l 二进制文件路径 | grep -B 2 crypt")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("$ otool -l WeChat.app/WeChat | grep -B 2 crypt\n          cmd LC_ENCRYPTION_INFO\n      cmdsize 20\n     cryptoff 16384\n    cryptsize 49463296\n      cryptid 1\n--\n          cmd LC_ENCRYPTION_INFO_64\n      cmdsize 24\n     cryptoff 16384\n    cryptsize 53149696\n      cryptid 1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("p",[s._v("cryptid 为1时说明被加密，为0时则是未加密。可以看到微信已经被加密了，第一个对应的是较老的 armv7 架构，后者则是 arm64 架构。被加密的二进制文件直接拿起来就撸是没用的，需要先敲壳。")]),s._v(" "),a("h2",{attrs:{id:"准备敲壳"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备敲壳"}},[s._v("#")]),s._v(" 准备敲壳")]),s._v(" "),a("h3",{attrs:{id:"ssh-连上的-iphone"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ssh-连上的-iphone"}},[s._v("#")]),s._v(" ssh 连上的 iPhone")]),s._v(" "),a("p",[s._v("确保 iPhone 和 Mac 在同一个网段，我的 iPhone 的 IP 地址为 192.168.1.22。OpenSSH 的 root 密码默认为 "),a("code",[s._v("alpine")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("$ ssh root@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.22")]),s._v("\nroot@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.22")]),s._v("'s password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \nDankal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Device"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("5s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("~ root# \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("这个时候已经顺利获取了 iPhone 的 root 权限，root 相当于 Windows 中的 administrator，权限最高，可读写。")]),s._v(" "),a("p",[s._v("ssh 相关的问题请看之前写过的"),a("a",{attrs:{href:"https://blog.bingo.ren/21.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("《iOS10.2 SSH连接越狱设备》"),a("OutboundLink")],1),s._v("，这里就不多阐述。")]),s._v(" "),a("h3",{attrs:{id:"获取设备当前的进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取设备当前的进程"}},[s._v("#")]),s._v(" 获取设备当前的进程")]),s._v(" "),a("p",[s._v("iPhone 打开微信，后台结束其他 APP 进程，控制台输入 "),a("code",[s._v("ps ax")]),s._v("  或者 "),a("code",[s._v("ps -e")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Dankal-Device-5s:~ root# ps -e\nPID TTY           TIME CMD\n  1 ??         0:26.19 /sbin/launchd\n 21 ??         0:01.77 /usr/sbin/syslogd\n 42 ??         0:17.65 /usr/libexec/logd\n 44 ??         0:00.08 /System/Library/PrivateFrameworks/MobileSoftwareUpdate.framework/Support/softwareupdated\n\n...\n\n1190 ??         0:08.03 /var/containers/Bundle/Application/46316B03-5DC3-4534-8D40-A29FE9315E22/WeChat.app/WeChat\n\n...\n\n1391 ??         0:00.17 /usr/local/bin/dropbear -F -R -p 22\n1392 ttys000    0:00.04 -sh\n1401 ttys000    0:00.01 ps -e\n1020 ttys001    0:00.02 login -fp mobile\n1021 ttys001    0:00.06 -sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("找到微信的的进程，记住 "),a("strong",[s._v("PID")]),s._v(" 为 1190，"),a("strong",[s._v("Bundle 路径")]),s._v("为 "),a("code",[s._v("/var/containers/Bundle/Application/46316B03-5DC3-4534-8D40-A29FE9315E22/WeChat.app/WeChat")])]),s._v(" "),a("h3",{attrs:{id:"勾住进程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#勾住进程"}},[s._v("#")]),s._v(" 勾住进程")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("Dankal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Device"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("5s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("~ root# cycript "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("p")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1190")]),s._v("\ncy#\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("看到 "),a("code",[s._v("cy#")]),s._v(" 的出现就说明，成功勾住了微信的进程。")]),s._v(" "),a("h3",{attrs:{id:"获取沙盒路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取沙盒路径"}},[s._v("#")]),s._v(" 获取沙盒路径")]),s._v(" "),a("p",[s._v("通过 Cycript 与进程交互动态获取应用的沙盒路径，输入以下任一行代码。")]),s._v(" "),a("ul",[a("li",[a("p",[a("code",[s._v('[NSHomeDirectory() stringByAppendingString:@"/Documents"]')])])]),s._v(" "),a("li",[a("p",[a("code",[s._v("NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES)[0]")])])])]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("cy# "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("NSHomeDirectory")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" stringByAppendingString"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/Documents"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n@"),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/mobile/Containers/Data/Application/E2ABB23B-EC66-4DA4-AD3E-E14E20D680B5/Documents"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("显示出来的字符串即为"),a("strong",[s._v("沙盒路径")]),s._v("。")]),s._v(" "),a("h3",{attrs:{id:"dumpdecrypted-dylib"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#dumpdecrypted-dylib"}},[s._v("#")]),s._v(" dumpdecrypted.dylib")]),s._v(" "),a("p",[s._v("敲壳的最重要的东西就是 dumpdecrypted.dylib，确保从 Github 上下载了最新的 "),a("a",{attrs:{href:"https://github.com/stefanesser/dumpdecrypted",target:"_blank",rel:"noopener noreferrer"}},[s._v("dumpdecrypted 源码"),a("OutboundLink")],1),s._v(" ，解压后进入 dumpdecrypted 文件夹的跟目录，make 编译 dumpdecrypted.dylib。")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Users"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("bingo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Downloads"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("master\n$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("make")]),s._v("\n`xcrun "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk iphoneos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("find")]),s._v(" gcc` "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Os  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Wimplicit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("isysroot `xcrun "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk iphoneos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("show"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("path")]),s._v("` "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F`xcrun "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk iphoneos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("show"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("path")]),s._v("`"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("System"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Library"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Frameworks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F`xcrun "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk iphoneos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("show"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("path")]),s._v("`"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("System"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Library"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("PrivateFrameworks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("arch armv7 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("arch armv7s "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("arch arm64 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("c")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("o")]),s._v(" dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("o")]),s._v(" dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("c")]),s._v(" \n`xcrun "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk iphoneos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("find")]),s._v(" gcc` "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Os  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Wimplicit "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("isysroot `xcrun "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk iphoneos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("show"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("path")]),s._v("` "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F`xcrun "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk iphoneos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("show"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("path")]),s._v("`"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("System"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Library"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Frameworks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("F`xcrun "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk iphoneos "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("show"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("sdk"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("path")]),s._v("`"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("System"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Library"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("PrivateFrameworks "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("arch armv7 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("arch armv7s "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("arch arm64 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("dynamiclib "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("o")]),s._v(" dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dylib dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("o")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("结束后会在当前目录中生成 dumpdecrypted.dylib，这里有坑，下面会说。")]),s._v(" "),a("h3",{attrs:{id:"拷贝-dumpdecrypted-dylib-到沙盒路径下"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#拷贝-dumpdecrypted-dylib-到沙盒路径下"}},[s._v("#")]),s._v(" 拷贝 dumpdecrypted.dylib 到沙盒路径下")]),s._v(" "),a("p",[s._v("scp 拷贝文件到越狱设备的沙盒路径下，沙盒目录刚刚用 Cycript 动态获取到了，如果设备不支持 scp 或者出现问题，可以参考"),a("a",{attrs:{href:"https://blog.bingo.ren/22.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("《让越狱设备支持scp文件传输》"),a("OutboundLink")],1),s._v("，或者使用 iTools 等工具实现文件传输，在此不再阐述。")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("$ scp dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dylib root@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.22")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mobile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Containers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Application"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("E2ABB23B"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("EC66"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("4DA4"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("AD3E"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("E14E20D680B5"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Documents\nroot@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.22")]),s._v("'s password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \ndumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dylib                           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("  193KB "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("242")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("3KB"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),s._v("  \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"开始敲壳"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开始敲壳"}},[s._v("#")]),s._v(" 开始敲壳")]),s._v(" "),a("p",[s._v("以上都是准备工作，接下来可以正式砸壳了。")]),s._v(" "),a("p",[s._v("dumpdecrypted.dylib 的具体用法是："),a("code",[s._v("DYLD_INSERT_LIBRARIES=to/Path/dumpdecrypted.dylib to/bundlePath")])]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("Dankal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Device"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("5s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("~ root# "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("cd")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mobile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Containers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Application"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("E2ABB23B"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("EC66"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("4DA4"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("AD3E"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("E14E20D680B5"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Documents\nDankal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Device"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("5s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mobile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Containers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Application"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("E2ABB23B"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("EC66"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("4DA4"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("AD3E"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("E14E20D680B5"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Documents root# DYLD_INSERT_LIBRARIES"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dylib "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/containers/Bundle/Application/46316B03-5DC3-4534-8D40-A29FE9315E22/WeChat.app/WeChat"')]),s._v("\ndyld"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" could not load inserted library "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dumpdecrypted.dylib'")]),s._v(" because no suitable image found"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("  Did "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("find")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n\tdumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dylib"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" required code signature missing "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'dumpdecrypted.dylib'")]),s._v("\n\n\nAbort trap"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("p",[s._v("很明显砸壳失败了，这跟说好的不一样！为什么别人砸壳成功了，而我却砸失败了？重复试了几次都不成功。")]),s._v(" "),a("p",[s._v("于是开始找问题，首先怀疑我的设备的 CPU 架构不对，打开 iTools 可以明显看到是 iPhone 5s、arm64、已越狱，没毛病，如果是 32位处理器的话应该是越狱不成功的。")]),s._v(" "),a("p",[s._v("再找问题，怀疑是 yalu02 越狱的时候出了问题，重启再越狱了一遍，还是一样的问题。")]),s._v(" "),a("p",[s._v("继续寻找，设备不支持吗？网上搜索 “iPhone5s 砸壳失败”，很失望，没有相关的资料，搜到的全是真的手机壳的相关问题。")]),s._v(" "),a("p",[s._v("最后，怀疑是越狱本身就有问题，毕竟 iOS 10.2 是非完美越狱。于是搜 “iOS 10.2 dumpdecrypted 失败”，终于摸索到相关文章，真的不容易啊，卡了一天，终于找到了解决方案。学会定位问题与使用搜索引擎对于程序员来说还是很重要的！")]),s._v(" "),a("h2",{attrs:{id:"正确砸壳"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#正确砸壳"}},[s._v("#")]),s._v(" 正确砸壳")]),s._v(" "),a("p",[s._v("dumpdecrypted 对系统 ios 9.3.2 以上的版本砸壳失败，会报错 "),a("code",[s._v("Killed: 9")]),s._v("，"),a("a",{attrs:{href:"http://iosre.com/t/make-dumpdecrypted-work-on-ios-9-3-3/4876",target:"_blank",rel:"noopener noreferrer"}},[s._v("解决方案"),a("OutboundLink")],1)]),s._v(" "),a("p",[s._v("当然，我们现在是 iOS 10.2，上面的解决方案可能还有问题，最后找到正确的解决方法，就是另外下载 "),a("a",{attrs:{href:"https://masbog.com/dumpdecrypt/dumpdecrypted.dylib",target:"_blank",rel:"noopener noreferrer"}},[s._v("dumpdecrypted.dylib"),a("OutboundLink")],1),s._v("，链接来自上面解决方案的页面下的评论。")]),s._v(" "),a("blockquote",[a("p",[s._v("masbog")])]),s._v(" "),a("blockquote",[a("p",[s._v("maybe some user need latest .dylib with iOS 10.2 sdk... "),a("a",{attrs:{href:"https://masbog.com/dumpdecrypt/11",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://masbog.com/dumpdecrypt/11"),a("OutboundLink")],1),s._v(" and some tutorial for iOS 10.2 :hugging:")])]),s._v(" "),a("p",[s._v("最终能找到问题所在我也感到非常神奇与幸运，为了预防站长的服务器挂掉或者链接失效，我已经将 .dylib 上传到了七牛云上，"),a("a",{attrs:{href:"https://cdn.bingo.ren/protect/dumpdecrypted.dylib",target:"_blank",rel:"noopener noreferrer"}},[s._v("cdn加速下载链"),a("OutboundLink")],1),s._v("，以防不备之需。")]),s._v(" "),a("h3",{attrs:{id:"使用方法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用方法"}},[s._v("#")]),s._v(" 使用方法")]),s._v(" "),a("p",[s._v("拷贝最新的 dumpdecrypted.dylib 到设备上的 "),a("code",[s._v("/usr/lib")]),s._v(" 下")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("$ scp dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dylib root@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.22")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib\nroot@"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.22")]),s._v("'s password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" \ndumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dylib           "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("  193KB "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("410")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("8KB"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("s   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("00")]),s._v("    \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("iOS 10+:")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("Dankal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Device"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("5s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" ldid "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("S "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dylib \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("最终一砸")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("Dankal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Device"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("5s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mobile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Containers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Application"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("E2ABB23B"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("EC66"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("4DA4"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("AD3E"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("E14E20D680B5"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Documents root# DYLD_INSERT_LIBRARIES"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("lib"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("dumpdecrypted"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dylib "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/var/containers/Bundle/Application/46316B03-5DC3-4534-8D40-A29FE9315E22/WeChat.app/WeChat"')]),s._v("\nmach"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("o")]),s._v(" decryption dumper\n\nDISCLAIMER"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" This tool "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("only")]),s._v(" meant "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" security research purposes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" not "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" application crackers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" detected 64bit ARM "),a("span",{pre:!0,attrs:{class:"token builtin"}},[s._v("binary")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" memory"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" offset "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" cryptid found"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v(" @"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("0x1000a0ca8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("from "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0x1000a0000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" ca8\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Found encrypted data at address "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("00004000")]),s._v(" of length "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("53149696")]),s._v(" bytes "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" type "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Opening "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("private"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("containers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Bundle"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Application"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("46316B03"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("5DC3"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4534")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("8D40"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("A29FE9315E22"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("WeChat"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("app"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("WeChat "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" reading"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Reading header\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Detecting header type\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Executable "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" a FAT image "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v(" searching "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("right")]),s._v(" architecture\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Correct arch "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("is")]),s._v(" at offset "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("58195968")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("in")]),s._v(" the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Opening WeChat"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("decrypted "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" writing"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Copying the not encrypted start of the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Dumping the decrypted data into the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Copying the not encrypted remainder of the "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Setting the LC_ENCRYPTION_INFO"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("cryptid "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("to")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" at offset 3780ca8\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Closing original "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("+")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" Closing dump "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("file")]),s._v("\nDankal"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("Device"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("5s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("var"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("mobile"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Containers"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Data"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Application"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("E2ABB23B"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("EC66"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("4DA4"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("AD3E"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("E14E20D680B5"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("Documents root# \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("h2",{attrs:{id:"查看成果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看成果"}},[s._v("#")]),s._v(" 查看成果")]),s._v(" "),a("p",[s._v("砸壳完毕，会自动在当前目录生成砸壳后的二进制文件 WeChat.decrypted")]),s._v(" "),a("div",{staticClass:"language-vim line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-vim"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("ls")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("00000000000000000000000000000000")]),s._v("  Ksid\t\t MMResourceMgr\tSafeMode"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("dat\t  db"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("globalconfig\n8f9f003b02f320ae7f28b1250270eb48  LocalInfo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("lst  MMappedKV\tWeChat"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("decrypted  mmupdateinfo"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(".")]),s._v("archive\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h2",{attrs:{id:"后话"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#后话"}},[s._v("#")]),s._v(" 后话")]),s._v(" "),a("p",[s._v("终于砸壳完毕，说难也不难，从 App Store 上下载的 ipa 就这样被砸掉了壳，可见所谓的 Apple Store 给 ipa 穿上的战衣也不过如此，并没有多么安全。敲壳后的二进制文件就可以做一些好玩的东西了，比如 dump 出头文件等，接下来的文章会慢慢记录。")])])}),[],!1,null,null,null);t.default=e.exports}}]);